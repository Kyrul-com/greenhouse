<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Smart Greenhouse Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { background-color: #0b1220; color: white; font-family: Arial, sans-serif; margin: 0; }
    .container { max-width: 1200px; margin: auto; padding: 20px; }
    h1 { font-size: 22px; margin-bottom: 20px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
    .card { background-color: #141c2f; border-radius: 10px; padding: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.3); }
    canvas { width: 100%; height: 200px; }
    .kpi { display: flex; flex-direction: column; gap: 10px; }
    .value { font-size: 24px; font-weight: bold; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Smart Greenhouse Dashboard</h1>
    <div class="grid">
      <div class="card kpi">
        <span>Temperature</span>
        <span class="value" id="tempVal">-- °C</span>
      </div>
      <div class="card kpi">
        <span>Humidity</span>
        <span class="value" id="humVal">-- %</span>
      </div>
      <div class="card kpi">
        <span>Battery</span>
        <span class="value" id="batVal">-- %</span>
      </div>
    </div>

    <div class="grid" style="margin-top:20px;">
      <div class="card">
        <h3>Temperature (°C)</h3>
        <canvas id="tempChart"></canvas>
      </div>
      <div class="card">
        <h3>Humidity (%)</h3>
        <canvas id="humChart"></canvas>
      </div>
      <div class="card">
        <h3>Battery Level (%)</h3>
        <canvas id="batChart"></canvas>
      </div>
    </div>
  </div>

  <script>
    const tempCtx = document.getElementById('tempChart').getContext('2d');
    const humCtx = document.getElementById('humChart').getContext('2d');
    const batCtx = document.getElementById('batChart').getContext('2d');

    const tempData = { labels: [], datasets: [{ label: 'Temperature', borderColor: '#10b981', data: [] }] };
    const humData = { labels: [], datasets: [{ label: 'Humidity', borderColor: '#06b6d4', data: [] }] };
    const batData = { labels: [], datasets: [{ label: 'Battery', borderColor: '#facc15', data: [] }] };

    const config = {
      type: 'line',
      options: {
        scales: { x: { display: false }, y: { min: 0, max: 100, grid: { color: 'rgba(255,255,255,0.1)' } } },
        plugins: { legend: { labels: { color: 'white' } } },
        elements: { point: { radius: 0 } },
      }
    };

    const tempChart = new Chart(tempCtx, { ...config, data: tempData });
    const humChart = new Chart(humCtx, { ...config, data: humData });
    const batChart = new Chart(batCtx, { ...config, data: batData });

    function randomNum(base, range) {
      return base + (Math.random() - 0.5) * range;
    }

    function updateData() {
      const time = new Date().toLocaleTimeString();
      const temp = randomNum(25, 5);
      const hum = randomNum(70, 10);
      const bat = randomNum(60, 5);

      document.getElementById('tempVal').textContent = temp.toFixed(1) + ' °C';
      document.getElementById('humVal').textContent = hum.toFixed(1) + ' %';
      document.getElementById('batVal').textContent = bat.toFixed(1) + ' %';

      const charts = [tempChart, humChart, batChart];
      const values = [temp, hum, bat];

      charts.forEach((chart, i) => {
        chart.data.labels.push(time);
        chart.data.datasets[0].data.push(values[i]);
        if (chart.data.labels.length > 20) {
          chart.data.labels.shift();
          chart.data.datasets[0].data.shift();
        }
        chart.update();
      });
    }

    setInterval(updateData, 2000);
  </script>
</body>
</html>
